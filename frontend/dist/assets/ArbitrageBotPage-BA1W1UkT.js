import{c_ as R,c$ as s,d0 as e}from"./index-Dh_-rMME.js";const K="/.netlify/functions",B=`${K}/arbitrage-bot`,$=()=>{const{isUnlocked:b,botWalletAddress:j,lockWallet:v,privateKey:d,setAndEncryptPrivateKey:S}=R(),[n,m]=s.useState(""),[l,N]=s.useState("normal"),[g,u]=s.useState(!1),[x,I]=s.useState(`Bot is idle. Configure your settings and start the bot.
`),[i,o]=s.useState(""),c=s.useRef(null),[h,f]=s.useState(""),[p,y]=s.useState("");s.useEffect(()=>{const t=sessionStorage.getItem("botInfuraApiKey");t&&m(t)},[]),s.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[x]);const a=t=>{const r=new Date().toLocaleTimeString();I(C=>`${C}${r}: ${t}
`)},k=s.useCallback(async()=>{if(!d){a("ERROR: Private key is not available. Please unlock your wallet."),u(!1);return}a(`Initiating new scan-and-execute cycle with ${l} gas strategy...`),u(!0),o("");try{const t=await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({privateKey:d,infuraProjectId:n,gasStrategy:l})}),r=await t.json();if(!t.ok)throw new Error(r.message||`Execution server responded with status ${t.status}`);r.tradeExecuted?(a(`SUCCESS! Trade executed. TxHash: ${r.txHash}`),a(`Simulated Gross Profit (before gas): ${r.simulatedGrossProfit}`)):a(`Scan complete. ${r.message}`)}catch(t){console.error("Arbitrage scan failed:",t),a(`ERROR: ${t.message}`)}finally{u(!1),a("Scan cycle finished. Ready for next run.")}},[d,n,l]),E=()=>{if(!n){o("Please save your Infura API Key before starting.");return}k()},P=()=>{v(),a("Wallet locked.")},A=()=>{sessionStorage.setItem("botInfuraApiKey",n),a("Infura API Key saved for this session.")},w=async()=>{if(!h||!p){o("Please provide both a private key and a password.");return}try{await S(h,p),f(""),y(""),o("")}catch(t){console.error(t),o("Failed to import key. Check console for details.")}};return b?e.jsx("div",{className:"arbitrage-bot-controller-centered",children:e.jsxs("div",{className:"bot-container",children:[e.jsxs("div",{className:"controller-header",children:[e.jsx("h3",{children:"Bot Control Panel"}),e.jsxs("p",{className:"wallet-address",children:["Wallet: ",j]}),e.jsx("button",{onClick:P,className:"button button-secondary",children:"Lock Wallet"})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("label",{children:"Infura API Key"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"password",value:n,onChange:t=>m(t.target.value),placeholder:"Your Infura API Key",className:"input-field"}),e.jsx("button",{onClick:A,className:"button",children:"Save"})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("label",{children:"Gas Price Strategy"}),e.jsxs("select",{value:l,onChange:t=>N(t.target.value),className:"select-field",children:[e.jsx("option",{value:"normal",children:"Normal"})," ",e.jsx("option",{value:"fast",children:"Fast"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsx("h4",{children:"Bot Status & Logs"}),e.jsx("div",{className:"controls",children:e.jsx("button",{onClick:E,disabled:g,className:"button button-primary",children:g?"Scanning...":"Start Scan-and-Execute"})}),e.jsx("div",{className:"log-box",ref:c,children:e.jsx("pre",{children:x})}),i&&e.jsx("p",{className:"error-message",children:i})]})}):e.jsx("div",{className:"arbitrage-bot-controller-centered",children:e.jsxs("div",{className:"bot-container auth-form",children:[e.jsx("h3",{children:"Unlock or Import Wallet"}),e.jsx("p",{children:"Import a new private key or unlock your existing one to begin."}),e.jsx("div",{className:"form-section",children:e.jsx("input",{type:"password",value:h,onChange:t=>f(t.target.value),placeholder:"Enter Private Key",className:"input-field"})}),e.jsx("div",{className:"form-section",children:e.jsx("input",{type:"password",value:p,onChange:t=>y(t.target.value),placeholder:"Enter a Strong Password",className:"input-field"})}),e.jsx("button",{onClick:w,className:"button button-primary",children:"Import & Encrypt"}),i&&e.jsx("p",{className:"error-message",children:i})]})})},L=()=>e.jsxs("div",{className:"arbitrage-bot-container",children:[e.jsxs("div",{className:"controller-header",children:[e.jsx("h3",{children:"Arbitrage Bot"}),e.jsx("p",{className:"text-color-muted",style:{marginTop:"0.5rem"},children:"Manually trigger the bot to find and execute arbitrage opportunities."})]}),e.jsx($,{})]});export{L as default};
