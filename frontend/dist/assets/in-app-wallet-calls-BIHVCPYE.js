import{af as h,R as p,ag as m,ah as f,ai as b,aj as g}from"./index-B3E2rKjL.js";import{sendBatchTransaction as w}from"./send-batch-transaction-CFHFTcFi.js";async function T(n){const s=await h(n);return p(s)}const i=new m(1e3);async function C(n){const{account:s,calls:r}=n,e=r.map(a=>({...a,chain:n.chain})),t=[],o=g(65);if(i.set(o,t),s.sendBatchTransaction){const a=await w({account:s,transactions:e});t.push(a.transactionHash),i.set(o,t)}else for(const a of e){const l=await T({account:s,transaction:a});t.push(l.transactionHash),i.set(o,t)}return o}async function x(n){const{chain:s,client:r,id:e}=n,t=i.get(e);if(!t)throw new Error("Failed to get calls status, unknown bundle id");const o=f({chain:s,client:r});let a="success";const l=await Promise.all(t.map(u=>b(o,{hash:u}).then(c=>({blockHash:c.blockHash,blockNumber:c.blockNumber,gasUsed:c.gasUsed,logs:c.logs.map(d=>({address:d.address,data:d.data,topics:d.topics})),status:c.status,transactionHash:c.transactionHash})).catch(()=>(a="pending",null))));return{atomic:!1,chainId:s.id,id:e,receipts:l.filter(u=>u!==null),status:a,statusCode:200,version:"2.0.0"}}export{x as inAppWalletGetCallsStatus,C as inAppWalletSendCalls};
